<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns="http://www.w3.org/1999/html">
<body>
<th:block th:fragment="likes(postId)">
  <script th:inline="javascript">
    $("#post-react-btn").click(function (){
      let param = {
        postNum: "[[${postId}]]"
      };
      console.log(param);
      $.ajax({
        type: "POST",
        url: "/post/modify/like",
        data : param,
        success: function (flag) {
          if (flag) {
            // 좋아요를 안 눌러진 상태일 때 -> 좋아요 추가
            $("#post-react-btn").addClass('text-primary');
            $("#post-react-btn-text").html("좋아요 취소");
            console.log(flag);
          } else {
            // 좋아요가 눌러진 상태일 때 -> 좋아요 제거
            $("#post-react-btn").removeClass('text-primary');
            $("#post-react-btn-text").html("좋아요");
            console.log(flag);
          }
          $('#post-ajax-form').load(location.href+' #post-ajax-form');
        },
      })
    });
  </script>
</th:block>
</body>
</html>